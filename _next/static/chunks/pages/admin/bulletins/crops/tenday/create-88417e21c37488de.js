(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5507],{21023:function(e,n,t){"use strict";var r=t(64836);n.Z=void 0;var i=r(t(64938)),o=t(85893),a=(0,i.default)((0,o.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");n.Z=a},19536:function(e,n,t){"use strict";var r=t(64836);n.Z=void 0;var i=r(t(64938)),o=t(85893),a=(0,i.default)([(0,o.jsx)("path",{d:"M21 19.1H3V5h18v14.1zM21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"},"0"),(0,o.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41z"},"1")],"CancelPresentation");n.Z=a},56863:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var r=t(63366),i=t(87462),o=t(67294),a=t(86010),l=t(27192),s=t(41796),c=t(98216),u=t(11496),d=t(33616),p=t(28979);function f(e){return(0,p.Z)("MuiButtonGroup",e)}var g=(0,t(76087).Z)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]),m=t(98363),v=t(85893);const b=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],h=(0,u.ZP)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[{[`& .${g.grouped}`]:n.grouped},{[`& .${g.grouped}`]:n[`grouped${(0,c.Z)(t.orientation)}`]},{[`& .${g.grouped}`]:n[`grouped${(0,c.Z)(t.variant)}`]},{[`& .${g.grouped}`]:n[`grouped${(0,c.Z)(t.variant)}${(0,c.Z)(t.orientation)}`]},{[`& .${g.grouped}`]:n[`grouped${(0,c.Z)(t.variant)}${(0,c.Z)(t.color)}`]},n.root,n[t.variant],!0===t.disableElevation&&n.disableElevation,t.fullWidth&&n.fullWidth,"vertical"===t.orientation&&n.vertical]}})((({theme:e,ownerState:n})=>(0,i.Z)({display:"inline-flex",borderRadius:e.shape.borderRadius},"contained"===n.variant&&{boxShadow:e.shadows[2]},n.disableElevation&&{boxShadow:"none"},n.fullWidth&&{width:"100%"},"vertical"===n.orientation&&{flexDirection:"column"},{[`& .${g.grouped}`]:(0,i.Z)({minWidth:40,"&:not(:first-of-type)":(0,i.Z)({},"horizontal"===n.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===n.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===n.variant&&"horizontal"===n.orientation&&{marginLeft:-1},"outlined"===n.variant&&"vertical"===n.orientation&&{marginTop:-1}),"&:not(:last-of-type)":(0,i.Z)({},"horizontal"===n.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===n.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===n.variant&&"horizontal"===n.orientation&&{borderRight:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===n.variant&&"vertical"===n.orientation&&{borderBottom:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===n.variant&&"inherit"!==n.color&&{borderColor:(0,s.Fq)(e.palette[n.color].main,.5)},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"transparent"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"transparent"},"contained"===n.variant&&"horizontal"===n.orientation&&{borderRight:`1px solid ${e.palette.grey[400]}`,[`&.${g.disabled}`]:{borderRight:`1px solid ${e.palette.action.disabled}`}},"contained"===n.variant&&"vertical"===n.orientation&&{borderBottom:`1px solid ${e.palette.grey[400]}`,[`&.${g.disabled}`]:{borderBottom:`1px solid ${e.palette.action.disabled}`}},"contained"===n.variant&&"inherit"!==n.color&&{borderColor:e.palette[n.color].dark},{"&:hover":(0,i.Z)({},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"currentColor"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"currentColor"})}),"&:hover":(0,i.Z)({},"contained"===n.variant&&{boxShadow:"none"})},"contained"===n.variant&&{boxShadow:"none"})})));var y=o.forwardRef((function(e,n){const t=(0,d.Z)({props:e,name:"MuiButtonGroup"}),{children:s,className:u,color:p="primary",component:g="div",disabled:y=!1,disableElevation:x=!1,disableFocusRipple:_=!1,disableRipple:j=!1,fullWidth:Z=!1,orientation:S="horizontal",size:w="medium",variant:O="outlined"}=t,E=(0,r.Z)(t,b),P=(0,i.Z)({},t,{color:p,component:g,disabled:y,disableElevation:x,disableFocusRipple:_,disableRipple:j,fullWidth:Z,orientation:S,size:w,variant:O}),k=(e=>{const{classes:n,color:t,disabled:r,disableElevation:i,fullWidth:o,orientation:a,variant:s}=e,u={root:["root",s,"vertical"===a&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${(0,c.Z)(a)}`,`grouped${(0,c.Z)(s)}`,`grouped${(0,c.Z)(s)}${(0,c.Z)(a)}`,`grouped${(0,c.Z)(s)}${(0,c.Z)(t)}`,r&&"disabled"]};return(0,l.Z)(u,f,n)})(P),C=o.useMemo((()=>({className:k.grouped,color:p,disabled:y,disableElevation:x,disableFocusRipple:_,disableRipple:j,fullWidth:Z,size:w,variant:O})),[p,y,x,_,j,Z,w,O,k.grouped]);return(0,v.jsx)(h,(0,i.Z)({as:g,role:"group",className:(0,a.Z)(k.root,u),ref:n,ownerState:P},E,{children:(0,v.jsx)(m.Z.Provider,{value:C,children:s})}))}))},67947:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/tenday/create",function(){return t(8822)}])},55688:function(e,n,t){"use strict";var r=t(85893),i=t(67294),o=t(45697),a=t.n(o),l=t(14866),s=t(46901);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u=i.forwardRef((function(e,n){return(0,r.jsx)(s.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){c(e,n,t[n])}))}return e}({elevation:6,ref:n,variant:"filled"},e))}));function d(e){var n=e.openSnackbar,t=e.message,o=e.severity,a=e.closeHandlerCB,s=void 0===a?function(){}:a,c=(0,i.useState)(n),d=c[0],p=c[1];(0,i.useEffect)((function(){p(n)}),[n]);var f=function(){p(!1),s()};return(0,r.jsx)(l.Z,{open:d,autoHideDuration:3e3,onClose:f,children:(0,r.jsx)(u,{onClose:f,severity:o,sx:{width:"100%"},children:t})})}d.propTypes={openSnackbar:a().bool,message:a().string,severity:a().string},n.Z=d},19247:function(e,n){"use strict";n.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:function(e){return e.spacing(1)},textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)},padding:function(e){return e.spacing(3)}},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},conditionLegend:{borderRadius:function(e){return e.spacing(1)},width:"100%",padding:function(e){return e.spacing(1)},border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:function(e){return e.spacing(1)}},recSeasonal:{marginTop:function(e){return e.spacing(1)},"& p, ul, ol":{fontSize:"14px"}},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"50px"}},pdfcontent:{ul:{paddingLeft:3}},recSeasonalStage:{marginTop:function(e){return e.spacing(5)},marginBottom:function(e){return e.spacing(2)},textDecoration:"underline"}}},8822:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return he}});var r=t(34051),i=t.n(r),o=t(85893),a=t(67294),l=t(9473),s=t(11163),c=t(45697),u=t.n(c),d=t(41664),p=t(21023),f=t(76295),g=t(11057),m=t(56863),v=t(87357),b=t(86886),h=t(93946),y=t(61903),x=t(15861),_=t(11829),j=t(19227),Z=t(22094),S=t(98456),w=t(87918),O=t(67720),E=t(40044),P=t(88409),k=t(53063),C=t(901),R=t(24478),T=t(22228),D=t(19247);function F(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){F(e,n,t[n])}))}return e}function B(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function I(e){var n=function(e){var n=e.children,t=e.value,r=e.index,i=B(e,["children","value","index"]);return(0,o.jsx)("div",z({role:"tabpanel",hidden:t!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},i,{children:t===r&&(0,o.jsx)(v.Z,{sx:{p:3,whiteSpace:e.smsstyle},children:n})}))},t=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},r=e.options,i=e.smstext,s=e.sel_options,c=e.optsactivities,u=e.recommendationsData,p=e.loading,f=e.handleSave,h=e.handlePreview,y=e.show,_=void 0===y||y,j=e.isCreateDisabled,Z=void 0!==j&&j,F=(0,l.I0)(),I=(0,l.v9)((function(e){return e.recommendations})),L=I.filtered_recommendations,A=I.recommendations,$=(0,T.Z)(null!==u&&void 0!==u?u:A,c).group,M=(0,l.v9)((function(e){return e.reports})),W=M.error,N=M.status,H=(0,l.v9)((function(e){return e.dashboard.isEnglish})),V=(0,a.useState)(0),G=V[0],U=V[1],Y=(0,a.useState)(!1),q=Y[0],K=Y[1];(0,a.useEffect)((function(){K(r.loading||N===C.G.PENDING)}),[r.loading,N]);return(0,o.jsxs)(b.ZP,{container:!0,sx:D.Z.container,gap:3,style:{marginTop:"24px",padding:p?"16px":"24px"},children:[(0,o.jsxs)(b.ZP,{item:!0,sx:D.Z.item,xs:12,lg:12,children:[(0,o.jsx)(v.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,o.jsx)(S.Z,{size:16,color:"primary",sx:{display:p?"block":"none"}})}),null!==L&&_&&(0,o.jsx)(v.Z,{children:(0,o.jsxs)(v.Z,{sx:{width:"100%",marginTop:{xs:"85px",lg:"0px"}},children:[(0,o.jsx)(v.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,o.jsxs)(P.Z,{value:G,onChange:function(e,n){U(n)},"aria-label":"basic tabs example",children:[(0,o.jsx)(E.Z,z({label:"PDF FORM"},t(0))),(0,o.jsx)(E.Z,z({label:"SMS FORM"},t(1)))]})}),(0,o.jsxs)(n,{value:G,index:0,smsstyle:"normal",children:[(0,o.jsxs)(v.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,o.jsx)(x.Z,{variant:"h4",children:"Impact Outlooks"}),(0,o.jsx)(w.Z,{size:"medium",variant:"outlined",label:H?"Tagalog":"English",onClick:function(){return F((0,k.cX)())},sx:{width:"90px"}})]}),(0,o.jsx)(v.Z,{sx:D.Z.recSeasonal,children:(0,o.jsx)(R.Z,{impactOutlookOnly:!0,isShowImpactOutlookSubtitle:!1,recommendations:$,impactOutlookEng:"impact",impactOutlookTag:"impact_tagalog",title:s.sel_crop,isTagalog:!H,isShowTitle:!1})}),(0,o.jsx)("hr",{}),(0,o.jsx)(x.Z,{variant:"h4",sx:{marginTop:"32px"},children:"Recommendations"}),Object.keys(L).map((function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x.Z,{variant:"h5",sx:D.Z.recSeasonalStage,children:e}),Object.keys(L[e]).map((function(n,t){return(0,o.jsxs)(v.Z,{sx:z({},D.Z.recSeasonal,{marginBottom:"24px","& h6":{color:"rgba(0, 0, 0, 0.67)"}}),children:[(0,o.jsx)(x.Z,{variant:"h6",children:n}),(0,o.jsx)(R.Z,{recommendations:L[e][n],isTagalog:!H,isShowTitle:!1})]},"rec-".concat(t))}))]})}))]}),(0,o.jsx)(n,{value:G,index:1,smsstyle:"pre-wrap",children:i})]})})]}),(0,o.jsxs)(v.Z,{sx:{marginBottom:"16px",width:"100%",display:null!==L&&_?"block":"none"},children:[(0,o.jsx)("br",{}),(0,o.jsx)(O.Z,{}),(0,o.jsx)("br",{}),""!==W&&(0,o.jsxs)(x.Z,{variant:"caption",sx:{color:"red"},children:["Error: ",W]}),(0,o.jsxs)(m.Z,{size:"large","aria-label":"large button group",sx:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:[(0,o.jsx)(d.default,{href:"/admin/bulletins/crops",passHref:!0,children:(0,o.jsx)(g.Z,{disabled:q,children:"Cancel"})}),(0,o.jsxs)(g.Z,{onClick:h,disabled:q,children:[(0,o.jsx)("span",{style:{display:q?"none":"block"},children:"Preview"})," ","\xa0",(0,o.jsx)(S.Z,{size:20,color:"secondary",sx:{display:q?"block":"none"}})]}),(0,o.jsx)(g.Z,{variant:"contained",onClick:f,disableElevation:!0,disabled:q||Z,children:"Save"})]})]})]})}I.propTypes={options:u().object,smstext:u().string,keyEng:u().string,keyTag:u().string,formTitle:u().string,isCreateDisabled:u().bool,show:u().bool,loading:u().bool,handleSave:u().func,handlePreview:u().func};var L=I,A=t(79316),$=t(55688),M=t(12671),W=t(22757);function N(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){N(e,n,t[n])}))}return e}function V(e){var n=(0,a.useState)(!1),t=n[0],r=n[1],i=(0,s.useRouter)(),c=(0,l.I0)(),u=e.open,S=e.loading,w=e.isloadingreport,O=e.isdisabled,E=e.climateRisk,P=e.optsprovinces,k=e.optsmunicipalities,C=e.optscrops,R=e.optscropstages,T=e.optsactivities,D=e.recommendationsData,F=e.sel_options,z=e.message,B=e.smstext,I=e.pageTitle,N=void 0===I?"":I,V=e.pageDescription,G=void 0===V?"":V,U=e.pdfPreview,Y=e.handlePreview,q=e.handleSave,K=e.resetSelections,X=e.togglePrompt,J=e.toggleViewerOpen,Q=e.onSelectItemChange,ee=(0,l.v9)((function(e){return e.reports})).report,ne="Invalid year";(0,a.useEffect)((function(){null===F.sel_municipality&&!0===t&&r(!1)}),[F.sel_municipality,t]);var te=function(){ee&&(c((0,M.s_)()),i.push("/admin/bulletins/crops/report/view/?docId=".concat(ee.id)))},re=function(){var e="Loading...";return P.length>0&&(e=null===F.sel_province?"Select a province":"Province"),e};return(0,o.jsxs)("div",{children:[(0,o.jsx)(j.Z,{isOpen:z.isOpen,maxWidth:"xs",openButtonText:null,title:z.title,contentText:z.msg,loading:z.loading,modalCancelHandlerCB:function(){z.savesuccess?te():X()},modalConfirmHandlerCB:function(){z.savesuccess?te():q()}}),(0,o.jsx)(Z.Z,{open:u,pdfPreview:U,error:F.error,loading:F.loading,toggleViewerOpen:J}),(0,o.jsx)($.Z,{openSnackbar:""!==F.error,message:F.error,severity:"warning"}),(0,o.jsxs)(b.ZP,{container:!0,sx:W.Z.container,children:[(0,o.jsxs)(v.Z,{sx:W.Z.headerText,children:[(0,o.jsxs)(v.Z,{children:[(0,o.jsx)(x.Z,{variant:"h5",children:N}),(0,o.jsx)("p",{dangerouslySetInnerHTML:{__html:G}})]}),(0,o.jsx)(v.Z,{children:(0,o.jsx)(h.Z,{"aria-label":"exit",size:"medium",children:(0,o.jsx)(d.default,{href:"/admin/bulletins/crops",passHref:!0,children:(0,o.jsx)(p.Z,{fontSize:"inherit"})})})})]}),(0,o.jsxs)(b.ZP,{item:!0,sx:W.Z.item,xs:12,lg:4,children:[(0,o.jsx)(x.Z,{variant:"h6",children:"Selection Options"}),(0,o.jsx)(f.Z,{disablePortal:!0,id:"province",size:"small",value:F.sel_province,disabled:0===P.length||F.error.includes(ne)||S,options:P,sx:W.Z.autocomplete,PaperComponent:_.Z,renderInput:function(e){return(0,o.jsx)(y.Z,H({},e,{label:re()}))},getOptionDisabled:function(e){return e.disabled},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){return Q(e,H({},n,{from:"province"}))}}),(0,o.jsx)(f.Z,{disablePortal:!0,id:"municipality",size:"small",value:F.sel_municipality,disabled:0===k.length||F.error.includes(ne)||S,options:k,sx:W.Z.autocomplete,PaperComponent:_.Z,renderInput:function(e){return(0,o.jsx)(y.Z,H({},e,{label:null===F.sel_municipality?"Select a municipality":"Municipality"}))},getOptionDisabled:function(e){return e.disabled||void 0!==e.iscalendar},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){Q(e,H({},n,{from:"municipality"})),r(!1)}}),(0,o.jsx)(f.Z,{disablePortal:!0,id:"crop",size:"small",value:F.sel_crop,disabled:0===C.length||S||!F.sel_municipality,options:C,sx:W.Z.autocomplete,PaperComponent:_.Z,renderInput:function(e){return(0,o.jsx)(y.Z,H({},e,{label:null===F.sel_crop?"Select a crop type":"Crop"}))},isOptionEqualToValue:function(e,n){return e.label===n},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){Q(e,H({},n,{from:"crop"})),r(!1)}}),null!==F.sel_municipality&&(0,o.jsxs)("div",{style:{marginTop:"16px",float:"left",textAlign:"center",border:"1px solid #DCEDC8",padding:"5px 10px",borderRadius:"5px"},children:[(0,o.jsx)(x.Z,{variant:"subtitle1",children:(0,o.jsx)("strong",{children:"Climate Risk:"})}),E]}),(0,o.jsxs)(m.Z,{disableElevation:!0,size:"small","aria-label":"outlined button controls group",disabled:w||null===F.sel_municipality||"-"===F.sel_crop,sx:{marginTop:"16px",float:"right"},children:[(0,o.jsx)(g.Z,{variant:"outlined",disabled:S||w,onClick:K,children:"Reset"}),(0,o.jsx)(g.Z,{variant:"contained",onClick:function(){return r((function(e){return!e}))},disabled:S||null===F.sel_month||0===R.length||""!==F.error||t,children:"Generate"})]})]}),(0,o.jsx)(b.ZP,{item:!0,sx:W.Z.item,xs:12,lg:8,children:(0,o.jsx)(A.Z,{climateRisk:E,selecteditems:F,cropstages:null===R||void 0===R?void 0:R.map((function(e){return e.label})).toString().split(",").join(", "),farmoperations:T.map((function(e){return e.label})).toString().split(",").join(", "),loading:S,reportType:"Special Weather Bulletin"===N?"special":"tenday"})})]}),(0,o.jsx)(L,{show:t,loading:S,keyEng:"practice",keyTag:"practice_tagalog",sel_options:F,recommendationsData:D,optsactivities:T,options:F,smstext:B,isCreateDisabled:O,handlePreview:Y,toggleViewerOpen:J,pdfPreview:U,handleSave:X})]})}V.propTypes={climateRisk:u().string,optsprovinces:u().array,optsmunicipalities:u().array,optscrops:u().array,optscropstages:u().array,optsactivities:u().array,sel_options:u().object,loading:u().bool,isloadingreport:u().bool,isdisabled:u().bool,open:u().bool,message:u().object,smstext:u().string,pageTitle:u().string,pageDescription:u().string,pdfPreview:u().object,onSelectItemChange:u().func,handlePreview:u().func,handleSave:u().func,toggleViewerOpen:u().func,resetSelections:u().func,togglePrompt:u().func};var G=V,U=t(66383),Y=t(95243),q=t(16327),K=t(61690),X=t(87006),J=t(72216),Q=t(59390),ee=t(38885),ne=t(22856),te=t(27941),re=t(23766),ie=t(15497),oe=t(94640),ae=t(27392),le=t(59111),se=t(77715),ce=t(47426),ue=t(87784),de=t(52955);function pe(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function fe(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){pe(o,r,i,a,l,"next",e)}function l(e){pe(o,r,i,a,l,"throw",e)}a(void 0)}))}}function ge(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function me(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ge(e,n,t[n])}))}return e}var ve={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:[],sel_month:null,processed:!1,loading:!1,error:"",success:"",sel_condition:{id:0,from:"weather_condition",label:ce.MW.WAY_BELOW_NORMAL.label}},be={url:"",filename:""};var he=(0,Y.Z)((function(e){var n=e.user,t=e.onBtnLogoutClick,r=e.loading,s=(0,a.useState)(ve),c=s[0],u=s[1],d=(0,a.useState)({}),p=d[0],f=d[1],g=(0,a.useState)({}),m=g[0],v=g[1],b=(0,a.useState)([]),h=b[0],y=b[1],x=(0,a.useState)([]),_=x[0],j=x[1],Z=(0,a.useState)([]),S=Z[0],w=Z[1],O=(0,a.useState)([]),E=O[0],P=O[1],R=(0,re.Z)(c.sel_province,S),T=(0,oe.Z)(c.sel_province,c.sel_municipality),D=T.days,F=T.loading,z=T.summary;(0,a.useEffect)((function(){if(D.length>0){var e=(0,de.Z)(D,"tenday"),n=me({},e);["Flooding/Submergence 3M","Flooding/Submergence 2H"].includes(n.label)&&(e.label="Flooding/Submergence",e.code="flood_submergence"),f(e),v(n)}}),[D]);var B=(0,Q.Z)(c.sel_province,c.sel_crop),I=B.cropcalendar,L=B.cropStages,A=B.loading,$=(0,ee.Z)().cropList.map((function(e,n){return{disabled:!1,label:e,id:n}})),W=(0,ne.Z)(p.code,E,c.sel_crop,"tenday",!0),N=W.recommendations,H=W.farmoperations,V=W.loading,Y=(0,te.Z)(c.sel_crop,m.code,"tenday_sms"),pe=Y.recommendationsSMS,ge=Y.loading,he=(0,ie.Z)(N,L,E),ye=he.group,xe=he.error;(0,a.useEffect)((function(){if(D.length>0&&!A&&!V){var e=new Date(D[0].label_full),n=(0,se.Mn)(e);if(0!==I.length){var t=I.data1.find((function(e){return e.municipality===c.sel_municipality&&e.crop===c.sel_crop})),r=I.data2.find((function(e){return e.municipality===c.sel_municipality&&e.crop===c.sel_crop})),i=[];if(t&&r&&Object.keys(L).length>0){Object.keys(n).forEach((function(e){var o=t[e].split(",");n[e].forEach((function(e){"1st_half"===e&&"none"!==o[0]?i.includes(o[0])||i.push(o[0]):"2nd_half"===e&&"none"!==o[1]&&(i.includes(o[1])||i.push(o[1]))}));var a=r[e].split(",");n[e].forEach((function(e){"1st_half"===e&&"none"!==a[0]?i.includes(a[0])||i.push(a[0]):"2nd_half"===e&&"none"!==a[1]&&(i.includes(a[1])||i.push(a[1]))}))}));var o=i.map((function(e,n){return{id:n,label:L[e].label,code:e}}));P(o)}}}}),[L,I.length,I.data1,I.data2,D,c.sel_municipality,c.sel_crop,A,V]);var _e=(0,l.v9)((function(e){return e.reports})),je=_e.status,Ze=_e.report,Se=(0,l.v9)((function(e){return e.dashboard.reportType})),we=(0,l.v9)((function(e){return e.dashboard.isEnglish})),Oe=(0,a.useState)(!0),Ee=Oe[0],Pe=Oe[1],ke=(0,a.useState)(!1),Ce=ke[0],Re=ke[1],Te=(0,a.useRef)(!1),De=(0,a.useState)(""),Fe=De[0],ze=De[1],Be=(0,a.useState)(be),Ie=Be[0],Le=Be[1],Ae=(0,a.useState)(ae.BF),$e=Ae[0],Me=Ae[1],We=(0,l.I0)();(0,a.useEffect)((function(){Te.current=!0;var e=function(){var e=fe(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,q.$m)();case 3:n=e.sent,Te&&w(n.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){Te.current=!1}}),[]),(0,a.useEffect)((function(){We((0,J.Km)([])),We((0,M.s_)())}),[We]),(0,a.useEffect)((function(){S.length>0&&j((0,le.m)(S))}),[S]),(0,a.useEffect)((function(){null!==z&&u((function(e){return me({},e,{sel_month:{label:z.date_range}})}))}),[z]),(0,a.useEffect)((function(){Pe(r||V||A||F||ge)}),[r,V,A,F,ge]),(0,a.useEffect)((function(){Le(be)}),[we]),(0,a.useEffect)((function(){0!==pe.length&&ze(pe[0].sms.replace("{{10_day_range_identifier}}",c.sel_month.label))}),[pe,c.sel_month]),(0,a.useEffect)((function(){je===C.G.FULLFILLED&&null!==Ze&&Te.current&&Me((function(e){return me({},e,{msg:"Success! Bulletin report created.",loading:!1,savesuccess:!0,docId:Ze.id})}))}),[je,Ze]),(0,a.useEffect)((function(){xe||null===ye||We((0,J.Km)(ye))}),[ye,xe,We]);var Ne=function(){var e=fe(i().mark((function e(){var n,t,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===Ie.url){e.next=3;break}return Re(!0),e.abrupt("return");case 3:return u((function(e){return me({},e,{loading:!0,error:"",success:""})})),e.prev=4,n={region:"Cordillera",province:c.sel_province,municipality:c.sel_municipality,operation:"preview",language:we?"en":"tag",crop:null===c||void 0===c?void 0:c.sel_crop},Re(!0),u((function(e){return me({},e,{loading:!0,error:""})})),e.next=10,(0,X.bM)(n);case 10:t=e.sent,r=new Blob([t],{type:"application/pdf"}),(o={}).href=URL.createObjectURL(r),o.download="".concat(c.sel_province,"_").concat(c.sel_municipality,".pdf"),Le((function(e){return me({},e,{url:o.href,filename:o.download})})),u((function(e){return me({},e,{loading:!1,success:"Bulletin preview created."})})),e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(4),e.next=23,(0,ue.fu)(e.t0);case 23:a=e.sent,u((function(e){return me({},e,{loading:!1,error:a})}));case 25:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=fe(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Me(me({},$e,{loading:!0,msg:"Saving report..."}));try{t={region:"Cordillera",province:c.sel_province,municipality:c.sel_municipality,operation:"create",language:we?"en":"tag",crop:c.sel_crop},We((0,K.a0)(t)).unwrap().then((function(){Se!==ae.Ry.TEN_DAY&&(We((0,k.uq)(ae.Ry.TEN_DAY)),We((0,K.RC)({uid:n.uid,type:ae.Ry.TEN_DAY})))})).catch((function(e){Te.current&&Me((function(n){return me({},n,{msg:e,loading:!1,savesuccess:!1,docId:null})}))}))}catch(o){r="",void 0!==o.response&&(r=void 0!==o.response.data&&"[object Blob]"===((i=o.response.data)&&"undefined"!==typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)?o.response.data:""),""===r&&(r=o.message),u((function(e){return me({},e,{loading:!1,error:r})}))}case 2:case"end":return e.stop()}var i}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.jsx)(U.Z,{loading:r,user:n,onBtnLogoutClick:t,accLevel:ce.DW.ADMIN,children:(0,o.jsx)(G,{climateRisk:p.label,optsprovinces:_,optsmunicipalities:R,optscrops:$,optscropstages:E,optsactivities:H,sel_options:c,loading:Ee,recommendationsData:N,isloadingreport:je===C.G.PENDING,isdisabled:!1,open:Ce,message:$e,smstext:Fe,pageTitle:"10-Day Farm Weather Outlook and Advisory Bulletin",pageDescription:"Create <strong>10-Day Farm Weather Outlook and Advisory</strong> crop recommendations bulletins. Finalized bulletins will be automatically uploaded to the site for public download.",pdfPreview:Ie,onSelectItemChange:function(e,n){var t=n.from,r=n.label;if(Le(be),h.length>0&&y([]),""!==c.error&&u((function(e){return me({},e,{error:""})})),Object.keys(n).includes("id"))switch(t){case"province":P([]),u((function(e){return me({},e,{sel_province:r,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null})}));break;case"municipality":P([]),u((function(e){return me({},e,{sel_municipality:r,sel_crop:null,sel_stage:null,sel_activity:null})}));break;case"crop":u((function(e){return me({},e,{sel_crop:r,sel_stage:null,sel_activity:null})})),P([])}else if("province"===t){var i=c.sel_month;u(me({},ve,{sel_month:i})),P([])}else"municipality"===t&&(u(me({},c,{sel_municipality:null,sel_crop:null,sel_day:null,sel_stage:null,sel_activity:null})),P([]))},handlePreview:Ne,handleSave:He,toggleViewerOpen:function(){Re((function(e){return!e}))},resetSelections:function(){var e=c.sel_month;u(me({},ve,{sel_month:e})),P([]),We((0,J.Km)([]))},togglePrompt:function(){Me((function(e){return me({},ae.BF,{isOpen:!e.isOpen})}))}})})}))},22228:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e){var n=(0,r.useState)([]),t=n[0],o=n[1],a=(0,r.useState)(""),l=a[0],s=a[1];(0,r.useEffect)((function(){if(s(""),(null===e||void 0===e?void 0:e.length)>0)try{var n=e.map((function(e){return{impact:e.impact_outlook_english,impact_tagalog:e.impact_outlook_tagalog}})).filter((function(e){return""!==e.impact_outlook_english&&""!==e.impact_outlook_tagalog}));return n=u(n),void o([{impact:c(n.impact),impact_tagalog:c(n.impact_tagalog)}])}catch(t){s(t)}else o([])}),[e]);var c=function(e){var n="-",t=e.reduce((function(e,t){return t.includes("<p>")?("list"===n&&(e+="</ul>"),e+=t,n="p"):(["-","p"].includes(n)&&(e+="<ul>"),e+=t,n="list"),e}),"");return"list"===n&&(t+="</ul>"),t},u=function(e){var n={impact:[],impact_tagalog:[]};return e.reduce((function(e,t){return Object.keys(e).forEach((function(r){var i=t[r].replace(/<ul>/g,"");(i=(i=i.replace(/<\/ul>/g,"")).replace(/<li>/g,"")).split("</li>").forEach((function(t){t.includes("<p>")?t.replace(/<p>/g,"").split("</p>").forEach((function(t){n[r].includes(t)||""===t||(n[r].push(t),e[r].push("<p>".concat(t,"</p>")))})):n[r].includes(t)||""===t||(n[r].push(t),e[r].push("<li>".concat(t,"</li>")))}))})),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){i(e,n,t[n])}))}return e}({},e)}),{impact:[],impact_tagalog:[]})};return{group:t,error:l}}},15497:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(67294);function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n,t){var i=(0,r.useState)(null),a=i[0],l=i[1],s=(0,r.useState)(""),c=s[0],u=s[1];return(0,r.useEffect)((function(){if(u(""),(null===e||void 0===e?void 0:e.length)>0&&(null===t||void 0===t?void 0:t.length)>0&&n){var r=e.map((function(e){return e.farming_activity})).filter((function(e,n,t){return t.indexOf(e)===n})),i=null===t||void 0===t?void 0:t.map((function(e){return e.code}));try{l(i.reduce((function(t,i){return null===r||void 0===r||r.forEach((function(r){var a=n[i].label,l=e.filter((function(e){return e.crop_stage===i&&e.farming_activity===r}));l.length>0&&a&&(void 0===t[a]&&(t[a]={}),void 0===t[a][r]&&(t[a][r]=[]),t[a][r]=o(t[a][r]).concat(o(l)))})),t}),{}))}catch(a){l(null),u(a)}}else l(null)}),[e,n,t]),{group:a,error:c}}},27941:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(34051),i=t.n(r),o=t(67294),a=t(1096);function l(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function s(e,n,t){var r=(0,o.useState)([]),s=r[0],c=r[1],u=(0,o.useState)(!1),d=u[0],p=u[1],f=(0,o.useState)(""),g=f[0],m=f[1];return(0,o.useEffect)((function(){var r=function(){var r,o=(r=i().mark((function r(){var o,l,s,u;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=[],p(!1),m(""),r.next=6,(0,a.iR)({crop:e,climateRisk:n,type:t});case 6:o=r.sent,p(!1),c(o||[]),r.next=18;break;case 11:r.prev=11,r.t0=r.catch(0),u=null!==(s=null===r.t0||void 0===r.t0||null===(l=r.t0.response)||void 0===l?void 0:l.data)&&void 0!==s?s:r.t0.message,m(u),p(!1);case 18:case"end":return r.stop()}}),r,null,[[0,11]])})),function(){var e=this,n=arguments;return new Promise((function(t,i){var o=r.apply(e,n);function a(e){l(o,t,i,a,s,"next",e)}function s(e){l(o,t,i,a,s,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();e&&t?r():c([])}),[e,n,t]),{recommendationsSMS:s,loading:d,error:g}}},94640:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var r=t(67294),i=t(9473),o=t(47426),a=t(56867),l=t(77715),s=t(901);function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){var t=(0,r.useState)([]),c=t[0],d=t[1],p=(0,r.useState)(null),f=p[0],g=p[1],m=(0,r.useState)(""),v=m[0],b=m[1],h=(0,r.useState)(""),y=h[0],x=h[1],_=(0,r.useState)(!1),j=_[0],Z=_[1],S=(0,i.I0)(),w=(0,i.v9)((function(e){return e.tendayweather})),O=w.ids,E=w.status,P=w.entities,k=w.error;return(0,r.useEffect)((function(){null!==e&&(b(""),x(""),S((0,a.R)(e)))}),[e,S]),(0,r.useEffect)((function(){b(k)}),[k]),(0,r.useEffect)((function(){Z(E===s.G.PENDING)}),[E]),(0,r.useEffect)((function(){if(b(""),x(""),E===s.G.FULLFILLED&&O.length>0&&""===k&&null!==n){var e=Object.values(P).find((function(e){return e.municipality===n}));if(void 0!==e){var t,r,i=JSON.parse(e.data),a=Object.values(o.MW);d(i.reduce((function(e,n,o){var s,c,d;return u(e).concat([{id:o,label:n.day_format,label_full:null===(s=(0,l.Ay)(n.day_format,i[9].day_format))||void 0===s?void 0:s.toDateString(),rainfall:n.rainfall,forecast:null!==(t=null===(c=a.find((function(e){return e.tenday===n.rainfall})))||void 0===c?void 0:c.sync)&&void 0!==t?t:"-",code:null!==(r=null===(d=a.find((function(e){return e.tenday===n.rainfall})))||void 0===d?void 0:d.label)&&void 0!==r?r:"-"}])}),[]));var c=new Date(1e3*i[0].date_start.seconds),p=(0,l.Mn)(c);c.getFullYear()!==(new Date).getFullYear()&&b("Invalid year detected in the 10-day validity date range: ".concat(i[0].date_range)),g({months:p,date_start:c,date_range:i[0].date_range})}else{var f=k||"Weather data for the municipality is not available at the moment, however, you can continue viewing recommendations. Please verify that the municipality name is present in the 10-Day weather forecast.";k?(d([]),g(null),b(f)):x(f)}}}),[n,P,O,E,k]),{days:c,summary:f,loading:j,error:v,warning:y}}}},function(e){e.O(0,[5124,7739,972,1903,3028,3203,6038,6295,6572,7841,1050,2044,1839,1855,9774,2888,179],(function(){return n=67947,e(e.s=n);var n}));var n=e.O();_N_E=n}]);