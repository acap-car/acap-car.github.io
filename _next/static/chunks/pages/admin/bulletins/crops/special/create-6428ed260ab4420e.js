(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4169],{21023:function(e,n,t){"use strict";var r=t(64836);n.Z=void 0;var o=r(t(64938)),i=t(85893),a=(0,o.default)((0,i.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");n.Z=a},19536:function(e,n,t){"use strict";var r=t(64836);n.Z=void 0;var o=r(t(64938)),i=t(85893),a=(0,o.default)([(0,i.jsx)("path",{d:"M21 19.1H3V5h18v14.1zM21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"},"0"),(0,i.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41z"},"1")],"CancelPresentation");n.Z=a},56863:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var r=t(63366),o=t(87462),i=t(67294),a=t(86010),l=t(27192),u=t(41796),c=t(98216),s=t(11496),d=t(33616),p=t(28979);function f(e){return(0,p.Z)("MuiButtonGroup",e)}var v=(0,t(76087).Z)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]),b=t(98363),g=t(85893);const m=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],h=(0,s.ZP)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[{[`& .${v.grouped}`]:n.grouped},{[`& .${v.grouped}`]:n[`grouped${(0,c.Z)(t.orientation)}`]},{[`& .${v.grouped}`]:n[`grouped${(0,c.Z)(t.variant)}`]},{[`& .${v.grouped}`]:n[`grouped${(0,c.Z)(t.variant)}${(0,c.Z)(t.orientation)}`]},{[`& .${v.grouped}`]:n[`grouped${(0,c.Z)(t.variant)}${(0,c.Z)(t.color)}`]},n.root,n[t.variant],!0===t.disableElevation&&n.disableElevation,t.fullWidth&&n.fullWidth,"vertical"===t.orientation&&n.vertical]}})((({theme:e,ownerState:n})=>(0,o.Z)({display:"inline-flex",borderRadius:e.shape.borderRadius},"contained"===n.variant&&{boxShadow:e.shadows[2]},n.disableElevation&&{boxShadow:"none"},n.fullWidth&&{width:"100%"},"vertical"===n.orientation&&{flexDirection:"column"},{[`& .${v.grouped}`]:(0,o.Z)({minWidth:40,"&:not(:first-of-type)":(0,o.Z)({},"horizontal"===n.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===n.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===n.variant&&"horizontal"===n.orientation&&{marginLeft:-1},"outlined"===n.variant&&"vertical"===n.orientation&&{marginTop:-1}),"&:not(:last-of-type)":(0,o.Z)({},"horizontal"===n.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===n.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===n.variant&&"horizontal"===n.orientation&&{borderRight:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===n.variant&&"vertical"===n.orientation&&{borderBottom:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===n.variant&&"inherit"!==n.color&&{borderColor:(0,u.Fq)(e.palette[n.color].main,.5)},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"transparent"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"transparent"},"contained"===n.variant&&"horizontal"===n.orientation&&{borderRight:`1px solid ${e.palette.grey[400]}`,[`&.${v.disabled}`]:{borderRight:`1px solid ${e.palette.action.disabled}`}},"contained"===n.variant&&"vertical"===n.orientation&&{borderBottom:`1px solid ${e.palette.grey[400]}`,[`&.${v.disabled}`]:{borderBottom:`1px solid ${e.palette.action.disabled}`}},"contained"===n.variant&&"inherit"!==n.color&&{borderColor:e.palette[n.color].dark},{"&:hover":(0,o.Z)({},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"currentColor"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"currentColor"})}),"&:hover":(0,o.Z)({},"contained"===n.variant&&{boxShadow:"none"})},"contained"===n.variant&&{boxShadow:"none"})})));var y=i.forwardRef((function(e,n){const t=(0,d.Z)({props:e,name:"MuiButtonGroup"}),{children:u,className:s,color:p="primary",component:v="div",disabled:y=!1,disableElevation:x=!1,disableFocusRipple:S=!1,disableRipple:_=!1,fullWidth:w=!1,orientation:O="horizontal",size:j="medium",variant:E="outlined"}=t,Z=(0,r.Z)(t,m),P=(0,o.Z)({},t,{color:p,component:v,disabled:y,disableElevation:x,disableFocusRipple:S,disableRipple:_,fullWidth:w,orientation:O,size:j,variant:E}),C=(e=>{const{classes:n,color:t,disabled:r,disableElevation:o,fullWidth:i,orientation:a,variant:u}=e,s={root:["root",u,"vertical"===a&&"vertical",i&&"fullWidth",o&&"disableElevation"],grouped:["grouped",`grouped${(0,c.Z)(a)}`,`grouped${(0,c.Z)(u)}`,`grouped${(0,c.Z)(u)}${(0,c.Z)(a)}`,`grouped${(0,c.Z)(u)}${(0,c.Z)(t)}`,r&&"disabled"]};return(0,l.Z)(s,f,n)})(P),R=i.useMemo((()=>({className:C.grouped,color:p,disabled:y,disableElevation:x,disableFocusRipple:S,disableRipple:_,fullWidth:w,size:j,variant:E})),[p,y,x,S,_,w,j,E,C.grouped]);return(0,g.jsx)(h,(0,o.Z)({as:v,role:"group",className:(0,a.Z)(C.root,s),ref:n,ownerState:P},Z,{children:(0,g.jsx)(b.Z.Provider,{value:R,children:u})}))}))},13063:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/special/create",function(){return t(54186)}])},55688:function(e,n,t){"use strict";var r=t(85893),o=t(67294),i=t(45697),a=t.n(i),l=t(14866),u=t(46901);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var s=o.forwardRef((function(e,n){return(0,r.jsx)(u.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){c(e,n,t[n])}))}return e}({elevation:6,ref:n,variant:"filled"},e))}));function d(e){var n=e.openSnackbar,t=e.message,i=e.severity,a=e.closeHandlerCB,u=void 0===a?function(){}:a,c=(0,o.useState)(n),d=c[0],p=c[1];(0,o.useEffect)((function(){p(n)}),[n]);var f=function(){p(!1),u()};return(0,r.jsx)(l.Z,{open:d,autoHideDuration:3e3,onClose:f,children:(0,r.jsx)(s,{onClose:f,severity:i,sx:{width:"100%"},children:t})})}d.propTypes={openSnackbar:a().bool,message:a().string,severity:a().string},n.Z=d},19247:function(e,n){"use strict";n.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:function(e){return e.spacing(1)},textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)},padding:function(e){return e.spacing(3)}},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},conditionLegend:{borderRadius:function(e){return e.spacing(1)},width:"100%",padding:function(e){return e.spacing(1)},border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:function(e){return e.spacing(1)}},recSeasonal:{marginTop:function(e){return e.spacing(1)},"& p, ul, ol":{fontSize:"14px"}},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"50px"}},pdfcontent:{ul:{paddingLeft:3}},recSeasonalStage:{marginTop:function(e){return e.spacing(5)},marginBottom:function(e){return e.spacing(2)},textDecoration:"underline"}}},54186:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return we}});var r=t(34051),o=t.n(r),i=t(85893),a=t(67294),l=t(9473),u=t(11163),c=t(45697),s=t.n(c),d=t(41664),p=t(21023),f=t(76295),v=t(11057),b=t(56863),g=t(87357),m=t(86886),h=t(93946),y=t(61903),x=t(15861),S=t(11829),_=t(19227),w=t(22094),O=t(98456),j=t(87918),E=t(67720),Z=t(40044),P=t(88409),C=t(53063),R=t(901),A=t(19247);function k(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){k(e,n,t[n])}))}return e}function I(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function L(e){var n,t,r,o,u=function(e){var n=e.children,t=e.value,r=e.index,o=I(e,["children","value","index"]);return(0,i.jsx)("div",T({role:"tabpanel",hidden:t!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},o,{children:t===r&&(0,i.jsx)(g.Z,{sx:{p:3,whiteSpace:e.smsstyle},children:n})}))},c=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},s=e.options,p=e.smstext,f=e.loading,h=e.handleSave,y=e.handlePreview,S=e.show,_=void 0===S||S,w=e.isCreateDisabled,k=void 0!==w&&w,L=(0,l.I0)(),D=(0,l.v9)((function(e){return e.recommendations})).recommendations,N=(0,l.v9)((function(e){return e.reports})),B=N.error,z=N.status,F=(0,l.v9)((function(e){return e.dashboard.isEnglish})),G=(0,a.useState)(0),M=G[0],$=G[1],H=(0,a.useState)(!1),W=H[0],V=H[1];(0,a.useEffect)((function(){V(s.loading||z===R.G.PENDING)}),[s.loading,z]);return(0,i.jsxs)(m.ZP,{container:!0,sx:A.Z.container,gap:3,style:{marginTop:"24px",padding:f?"16px":"24px"},children:[(0,i.jsxs)(m.ZP,{item:!0,sx:A.Z.item,xs:12,lg:12,children:[(0,i.jsx)(g.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,i.jsx)(O.Z,{size:16,color:"primary",sx:{display:f?"block":"none"}})}),1===(null===D||void 0===D?void 0:D.length)&&_&&(0,i.jsx)(g.Z,{children:(0,i.jsxs)(g.Z,{sx:{width:"100%",marginTop:{xs:"85px",lg:"0px"}},children:[(0,i.jsx)(g.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,i.jsxs)(P.Z,{value:M,onChange:function(e,n){$(n)},"aria-label":"basic tabs example",children:[(0,i.jsx)(Z.Z,T({label:"PDF FORM"},c(0))),(0,i.jsx)(Z.Z,T({label:"SMS FORM"},c(1)))]})}),(0,i.jsxs)(u,{value:M,index:0,smsstyle:"normal",children:[(0,i.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},children:[(0,i.jsx)(x.Z,{variant:"h4",children:"Impact Outlooks"}),(0,i.jsx)(j.Z,{size:"medium",variant:"outlined",label:F?"Tagalog":"English",onClick:function(){return L((0,C.cX)())},sx:{width:"90px"}})]}),1===(null===D||void 0===D?void 0:D.length)&&(0,i.jsx)(g.Z,{sx:A.Z.recSeasonal,children:(0,i.jsx)("div",{style:{marginBottom:"80px"},dangerouslySetInnerHTML:{__html:F?null===(n=D[0])||void 0===n?void 0:n.impact_outlook_english:null===(t=D[0])||void 0===t?void 0:t.impact_outlook_tagalog}})}),(0,i.jsx)("hr",{}),(0,i.jsx)(x.Z,{variant:"h4",sx:{marginTop:"32px"},children:"Recommendations"}),(0,i.jsx)(g.Z,{sx:A.Z.recSeasonal,children:(0,i.jsx)("div",{style:{marginBottom:"48px"},dangerouslySetInnerHTML:{__html:F?null===(r=D[0])||void 0===r?void 0:r.management_recommendations_english:null===(o=D[0])||void 0===o?void 0:o.management_recommendations_tagalog}})})]}),(0,i.jsx)(u,{value:M,index:1,smsstyle:"pre-wrap",children:p})]})})]}),(0,i.jsxs)(g.Z,{sx:{marginBottom:"16px",width:"100%",display:1===(null===D||void 0===D?void 0:D.length)&&_?"block":"none"},children:[(0,i.jsx)("br",{}),(0,i.jsx)(E.Z,{}),(0,i.jsx)("br",{}),""!==B&&(0,i.jsxs)(x.Z,{variant:"caption",sx:{color:"red"},children:["Error: ",B]}),(0,i.jsxs)(b.Z,{size:"large","aria-label":"large button group",sx:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:[(0,i.jsx)(d.default,{href:"/admin/bulletins/crops",passHref:!0,children:(0,i.jsx)(v.Z,{disabled:W,children:"Cancel"})}),(0,i.jsxs)(v.Z,{onClick:y,disabled:W,children:[(0,i.jsx)("span",{style:{display:W?"none":"block"},children:"Preview"})," ","\xa0",(0,i.jsx)(O.Z,{size:20,color:"secondary",sx:{display:W?"block":"none"}})]}),(0,i.jsx)(v.Z,{variant:"contained",onClick:h,disableElevation:!0,disabled:W||k,children:"Save"})]})]})]})}L.propTypes={options:s().object,smstext:s().string,isCreateDisabled:s().bool,show:s().bool,loading:s().bool,handleSave:s().func,handlePreview:s().func};var D=L,N=t(79316),B=t(55688),z=t(12671),F=t(47426),G=t(22757);function M(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){M(e,n,t[n])}))}return e}function H(e){var n,t=(0,a.useState)(!1),r=t[0],o=t[1],c=(0,u.useRouter)(),s=(0,l.I0)(),O=e.open,j=e.loading,E=e.isloadingreport,Z=e.isdisabled,P=e.optsprovinces,C=e.optsmunicipalities,R=e.optscrops,A=e.optswindsignals,k=e.sel_options,T=e.message,I=e.smstext,L=e.pageTitle,M=void 0===L?"":L,H=e.pageDescription,W=void 0===H?"":H,V=e.pdfPreview,Y=e.handlePreview,U=e.handleSave,q=e.resetSelections,X=e.togglePrompt,J=e.toggleViewerOpen,K=e.onSelectItemChange,Q=(0,l.v9)((function(e){return e.reports})).report;(0,a.useEffect)((function(){var e;r&&((null===k||void 0===k||null===(e=k.sel_signal)||void 0===e?void 0:e.code)===F.hi.SIGNAL_0?(null===k||void 0===k?void 0:k.sel_crop)||o(!1):k.sel_municipality||o(!1))}),[null===k||void 0===k?void 0:k.sel_municipality,null===k||void 0===k?void 0:k.sel_crop,null===k||void 0===k?void 0:k.sel_signal,r]);var ee=function(){Q&&(s((0,z.s_)()),c.push("/admin/bulletins/crops/report/view/?docId=".concat(Q.id)))},ne=function(e){var n=e.options,t=e.valueNotNull,r=e.labelFetch,o=e.labelSelect,i=void 0===o?"Select a province":o,a=e.labelValue,l=void 0===a?"Province":a,u=null!==r&&void 0!==r?r:"Loading...";return n.length>0&&(u=null===t?i:l),u};return(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Z,{isOpen:T.isOpen,maxWidth:"xs",openButtonText:null,title:T.title,contentText:T.msg,loading:T.loading,modalCancelHandlerCB:function(){T.savesuccess?ee():X()},modalConfirmHandlerCB:function(){T.savesuccess?ee():U()}}),(0,i.jsx)(w.Z,{open:O,pdfPreview:V,error:k.error,loading:k.loading,toggleViewerOpen:J}),(0,i.jsx)(B.Z,{openSnackbar:""!==k.error,message:k.error,severity:"warning"}),(0,i.jsxs)(m.ZP,{container:!0,sx:G.Z.container,children:[(0,i.jsxs)(g.Z,{sx:G.Z.headerText,children:[(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(x.Z,{variant:"h5",children:M}),(0,i.jsx)("p",{dangerouslySetInnerHTML:{__html:W}})]}),(0,i.jsx)(g.Z,{children:(0,i.jsx)(h.Z,{"aria-label":"exit",size:"medium",children:(0,i.jsx)(d.default,{href:"/admin/bulletins/crops",passHref:!0,children:(0,i.jsx)(p.Z,{fontSize:"inherit"})})})})]}),(0,i.jsxs)(m.ZP,{item:!0,sx:G.Z.item,xs:12,lg:4,children:[(0,i.jsx)(x.Z,{variant:"h6",children:"Selection Options"}),(0,i.jsx)(f.Z,{disablePortal:!0,id:"signal",size:"small",value:k.sel_signal,disabled:0===A.length||""!==k.error||j,options:A,sx:G.Z.autocomplete,PaperComponent:S.Z,renderInput:function(e){return(0,i.jsx)(y.Z,$({},e,{label:ne({options:A,valueNotNull:null===k||void 0===k?void 0:k.sel_signal,labelSelect:"Select a wind signal",labelValue:"Wind Signal"})}))},getOptionDisabled:function(e){return e.disabled},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){K(e,$({},n,{from:"signal"})),o(!1)}}),(0,i.jsx)(f.Z,{disablePortal:!0,id:"crop",size:"small",value:k.sel_crop,disabled:!(null===k||void 0===k?void 0:k.sel_signal)||0===R.length||""!==k.error||j,options:R,sx:G.Z.autocomplete,PaperComponent:S.Z,renderInput:function(e){return(0,i.jsx)(y.Z,$({},e,{label:ne({options:R,valueNotNull:null===k||void 0===k?void 0:k.sel_crop,labelSelect:"Select crop",labelValue:"Crop"})}))},getOptionDisabled:function(e){return e.disabled},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){K(e,$({},n,{from:"crop"})),o(!1)}}),(0,i.jsx)(f.Z,{disablePortal:!0,id:"province",size:"small",value:k.sel_province,disabled:0===P.length||!(null===k||void 0===k?void 0:k.sel_crop)||!(null===k||void 0===k?void 0:k.sel_signal)||0===(null===k||void 0===k||null===(n=k.sel_signal)||void 0===n?void 0:n.value)||""!==k.error||j,options:P,sx:G.Z.autocomplete,PaperComponent:S.Z,renderInput:function(e){return(0,i.jsx)(y.Z,$({},e,{label:ne({options:P,valueNotNull:null===k||void 0===k?void 0:k.sel_province,labelFetch:"Select a province",labelSelect:"Select a province",labelValue:"Province"})}))},getOptionDisabled:function(e){return e.disabled},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){K(e,$({},n,{from:"province"}))}}),(0,i.jsx)(f.Z,{disablePortal:!0,id:"municipality",size:"small",value:k.sel_municipality,disabled:0===C.length||!(null===k||void 0===k?void 0:k.sel_crop)||""!==k.error||j,options:C,sx:G.Z.autocomplete,PaperComponent:S.Z,renderInput:function(e){return(0,i.jsx)(y.Z,$({},e,{label:null===k.sel_municipality?"Select a municipality":"Municipality"}))},getOptionDisabled:function(e){return e.disabled||void 0!==e.iscalendar},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){K(e,$({},n,{from:"municipality"})),o(!1)}}),(0,i.jsxs)(b.Z,{disableElevation:!0,size:"small","aria-label":"outlined button controls group",disabled:E||Z,sx:{marginTop:"16px",float:"right"},children:[(0,i.jsx)(v.Z,{variant:"outlined",disabled:j||E,onClick:q,children:"Reset"}),(0,i.jsx)(v.Z,{variant:"contained",onClick:function(){return o((function(e){return!e}))},disabled:j||Z||""!==k.error||r,children:"Generate"})]})]}),(0,i.jsx)(m.ZP,{item:!0,sx:G.Z.item,xs:12,lg:8,children:(0,i.jsx)(N.Z,{selecteditems:k,loading:j,reportType:"special"})})]}),(0,i.jsx)(D,{show:r,loading:j,options:k,smstext:I,isCreateDisabled:Z,handlePreview:Y,handleSave:X})]})}H.propTypes={optsprovinces:s().array,optsmunicipalities:s().array,sel_options:s().object,loading:s().bool,isloadingreport:s().bool,isdisabled:s().bool,open:s().bool,message:s().object,smstext:s().string,pageTitle:s().string,pageDescription:s().string,pdfPreview:s().object,onSelectItemChange:s().func,handlePreview:s().func,handleSave:s().func,toggleViewerOpen:s().func,resetSelections:s().func,togglePrompt:s().func};var W=H,V=t(66383),Y=t(95243),U=t(30560),q=t(1029),X=t(16327),J=t(61690),K=t(87006),Q=t(72216),ee=t(38885);function ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function re(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return ne(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ne(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,n,t,r){var o=(0,a.useState)([]),i=o[0],l=o[1];return(0,a.useEffect)((function(){if((null===e||void 0===e?void 0:e.data)&&(null===n||void 0===n?void 0:n.data)&&t.length>0&&null!==r){var o=e.data.filter((function(e){return e.signal===(null===r||void 0===r?void 0:r.value)})).map((function(e){return e.province})).filter((function(e,n,t){return t.indexOf(e)===n})),i=e.data.reduce((function(e,n){return void 0===e[n.province]&&(e[n.province]=[]),e[n.province]=re(e[n.province]).concat(re(n.municipalities)),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){te(e,n,t[n])}))}return e}({},e)}),{}),a=re(t);a.forEach((function(n){n.disabled=!o.includes(n.label),n.municipalities.forEach((function(t){var r=e.data.findIndex((function(e){return e.province===t.province&&e.municipalities.includes(t.label)}));n.disabled?t.disabled=!0:(t.disabled=!i[n.label].includes(t.label),t.signal=r>-1?e.data[r].signal:0)}))})),l(a)}}),[e,n,t,r]),{affectedprovinces:i}}var ie=t(23766);function ae(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ae(e,n,t[n])}))}return e}var ue=[{id:0,label:F.hl.general_no_signal,value:0,code:F.hi.SIGNAL_0,disabled:!1},{id:1,label:F.hl.signal_number_1,value:1,code:F.hi.SIGNAL_1,disabled:!0},{id:2,label:F.hl.signal_number_2,value:2,code:F.hi.SIGNAL_2,disabled:!0},{id:3,label:F.hl.signal_number_3,value:3,code:F.hi.SIGNAL_3,disabled:!0},{id:4,label:F.hl.signal_number_4,value:4,code:F.hi.SIGNAL_4,disabled:!0},{id:5,label:F.hl.signal_number_5,value:5,code:F.hi.SIGNAL_5,disabled:!0}];var ce=t(1096);function se(e,n,t,r,o,i,a){try{var l=e[i](a),u=l.value}catch(c){return void t(c)}l.done?n(u):Promise.resolve(u).then(r,o)}function de(e){var n=e.crop,t=e.signal,r=e.type,i=void 0===r?"special":r,u=e.isDispatch,c=void 0!==u&&u,s=(0,a.useState)([]),d=s[0],p=s[1],f=(0,a.useState)(!1),v=f[0],b=f[1],g=(0,a.useState)(""),m=g[0],h=g[1],y=(0,l.I0)();return(0,a.useEffect)((function(){var e=function(){var e,r=(e=o().mark((function e(){var r,a,l,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=[{field:"crop",op:"==",value:n},{field:"wind_signal",op:"==",value:t}],b(!0),y((0,Q.nS)()),e.next=6,(0,ce.O_)({type:i,queryFields:r});case 6:if(a=e.sent,b(!1),p(a),c&&y((0,Q.lO)(a||[])),0!==(a||[]).length){e.next=12;break}throw new Error("No available recommendations");case 12:e.next=20;break;case 14:e.prev=14,e.t0=e.catch(0),h(null!==(u=null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.data)&&void 0!==u?u:e.t0.message),b(!1);case 20:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){se(i,r,o,a,l,"next",e)}function l(e){se(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();n&&t&&e()}),[n,t,i,c,y]),{recommendations:d,loading:v,error:m}}var pe=t(87682),fe=t(27392),ve=t(87784);function be(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ge(e,n,t,r,o,i,a){try{var l=e[i](a),u=l.value}catch(c){return void t(c)}l.done?n(u):Promise.resolve(u).then(r,o)}function me(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){ge(i,r,o,a,l,"next",e)}function l(e){ge(i,r,o,a,l,"throw",e)}a(void 0)}))}}function he(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ye(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){he(e,n,t[n])}))}return e}function xe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){l=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(l)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return be(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return be(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Se={url:"",filename:""},_e={sel_province:null,sel_municipality:null,sel_crop:null,sel_signal:null,sel_typhoon:null,processed:!1,loading:!1,error:"",success:""};var we=(0,Y.Z)((function(e){var n,t,r=e.user,u=e.onBtnLogoutClick,c=e.loading,s=(0,a.useState)(_e),d=s[0],p=s[1],f=(0,a.useState)([]),v=f[0],b=f[1],g=(0,l.v9)((function(e){return e.reports})),m=g.status,h=g.report,y=(0,l.v9)((function(e){return e.dashboard.reportType})),x=(0,l.v9)((function(e){return e.dashboard.isEnglish})),S=(0,a.useState)(!0),_=S[0],w=S[1],O=(0,a.useState)(!1),j=O[0],E=O[1],Z=(0,a.useRef)(!1),P=(0,a.useState)(Se),A=P[0],k=P[1],T=(0,a.useState)(fe.BF),I=T[0],L=T[1],D=(0,l.I0)(),N=xe((0,pe.ky)(q.K.GLOBAL_COLLECTIONS,q.K.CYCLONE_ADVISORY),2),B=N[0],G=N[1],M=xe((0,pe.ky)(U.M.WEATHER_FORECASTS,"".concat("Cordillera","/").concat(U.M.SUB_SPECIAL_COMMON,"/").concat(U.M.COMMON_SPECIAL_TYPE.WIND_SPEED)),2),$=M[0],H=M[1],Y=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,a.useState)([]),r=t[0],o=t[1],i=(0,a.useState)(null),l=i[0],u=i[1];return(0,a.useEffect)((function(){if(!n)if(0===(null!==e&&void 0!==e?e:[]).length)o(ue);else{var t,r,i,a,l=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(r=t.signal)||void 0===r?void 0:r.map((function(e){return e.number}));u(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(a=i.meta)||void 0===a?void 0:a.typhoon_name),o(ue.map((function(e){return le({},e,{disabled:0!==e.value&&!l.includes(e.value)})})))}}),[e,n]),{windSignals:r,typhoon:l}}(B,G),ne=Y.windSignals,te=oe($,B,v,null===d||void 0===d?void 0:d.sel_signal).affectedprovinces,re=(0,ie.Z)(d.sel_province,te),ae=(0,ee.Z)(),ce=ae.cropList,se=ae.loading,be=ce.map((function(e,n){return{disabled:!1,label:e,id:n}})),ge=(0,a.useMemo)((function(){var e,n;return(0!==(null===(e=d.sel_signal)||void 0===e?void 0:e.value)||null===(null===d||void 0===d?void 0:d.sel_crop))&&(!((null===(n=d.sel_signal)||void 0===n?void 0:n.value)>0)||(!d.sel_province||!d.sel_municipality))}),[d]),he=de({type:"special",crop:null===d||void 0===d?void 0:d.sel_crop,signal:null===d||void 0===d||null===(n=d.sel_signal)||void 0===n?void 0:n.code,isDispatch:!0}),we=he.loading,Oe=he.error,je=de({type:"special_sms",crop:null===d||void 0===d?void 0:d.sel_crop,signal:null===d||void 0===d||null===(t=d.sel_signal)||void 0===t?void 0:t.code}),Ee=je.recommendations,Ze=je.loading,Pe=je.error,Ce=(0,a.useMemo)((function(){if((null===Ee||void 0===Ee?void 0:Ee.length)>0&&B){var e,n,t,r=Ee[0].sms.replace("{{special_weather_name_identifier}}",null!==(t=null===B||void 0===B||null===(e=B.data)||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.typhoon_name)&&void 0!==t?t:"-");return(null===d||void 0===d?void 0:d.sel_province)&&(null===d||void 0===d?void 0:d.sel_municipality)&&(r=r.replace("{{municipality_identifier}}","".concat(null===d||void 0===d?void 0:d.sel_province,", ").concat(null===d||void 0===d?void 0:d.sel_municipality))),r}return null}),[Ee,B,null===d||void 0===d?void 0:d.sel_province,null===d||void 0===d?void 0:d.sel_municipality]);(0,a.useEffect)((function(){Z.current=!0;var e=function(){var e=me(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,X.$m)();case 3:n=e.sent,Z&&b(n.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){Z.current=!1}}),[]),(0,a.useEffect)((function(){D((0,Q.nS)()),D((0,z.s_)())}),[D]),(0,a.useEffect)((function(){w(c||we||se||Ze||G===R.G.PENDING||H===R.G.PENDING)}),[c,we,se,Ze,G,H]),(0,a.useEffect)((function(){k(Se)}),[x]),(0,a.useEffect)((function(){if(""!==Oe){var e=Oe||Pe;p((function(n){return ye({},n,{error:e})}))}else p((function(e){return ye({},e,{error:""})}))}),[Oe,Pe]),(0,a.useEffect)((function(){m===R.G.FULLFILLED&&null!==h&&Z.current&&L((function(e){return ye({},e,{msg:"Success! Bulletin report created.",loading:!1,savesuccess:!0,docId:h.id})}))}),[m,h]);var Re=function(){var e=me(o().mark((function e(){var n,t,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===A.url){e.next=3;break}return E(!0),e.abrupt("return");case 3:return p((function(e){return ye({},e,{loading:!0,error:"",success:""})})),e.prev=4,n={region:"Cordillera",province:d.sel_province,municipality:d.sel_municipality,crop:d.sel_crop,language:x?"en":"tag",signal:null===d||void 0===d?void 0:d.sel_signal.code,operation:"preview"},E(!0),p((function(e){return ye({},e,{loading:!0,error:""})})),e.next=10,(0,K.U1)(n);case 10:t=e.sent,r=new Blob([t],{type:"application/pdf"}),(i={}).href=URL.createObjectURL(r),i.download="".concat(d.sel_province,"_").concat(d.sel_municipality,".pdf"),k((function(e){return ye({},e,{url:i.href,filename:i.download})})),p((function(e){return ye({},e,{loading:!1,success:"Bulletin preview created."})})),e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(4),e.next=23,(0,ve.fu)(e.t0);case 23:a=e.sent,p((function(e){return ye({},e,{loading:!1,error:a})}));case 25:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=me(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(ye({},I,{loading:!0,msg:"Saving report..."}));try{n={region:"Cordillera",province:d.sel_province,municipality:d.sel_municipality,crop:d.sel_crop,language:x?"en":"tag",signal:null===d||void 0===d?void 0:d.sel_signal.code,operation:"create"},D((0,J.tR)(n)).unwrap().then((function(){y!==fe.Ry.SPECIAL_WEATHER&&(D((0,C.uq)(fe.Ry.SPECIAL_WEATHER)),D((0,J.RC)({uid:r.uid,type:fe.Ry.SPECIAL_WEATHER})))})).catch((function(e){Z.current&&L((function(n){return ye({},n,{msg:e,loading:!1,savesuccess:!1,docId:null})}))}))}catch(i){t="",void 0!==i.response&&(t=void 0!==i.response.data&&"[object Blob]"===((o=i.response.data)&&"undefined"!==typeof Symbol&&o.constructor===Symbol?"symbol":typeof o)?i.response.data:""),""===t&&(t=i.message),p((function(e){return ye({},e,{loading:!1,error:t})}))}case 2:case"end":return e.stop()}var o}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsx)(V.Z,{loading:c,user:r,onBtnLogoutClick:u,accLevel:F.DW.ADMIN,children:(0,i.jsx)(W,{optsprovinces:te,optsmunicipalities:re,optswindsignals:ne,optscrops:be,sel_options:d,loading:_,isloadingreport:m===R.G.PENDING,isdisabled:ge,open:j,message:I,smstext:Ce,pageTitle:"Special Weather Bulletin",pageDescription:"Create <strong>Special Weather</strong> crop recommendations bulletins. Finalized bulletins will be automatically uploaded to the site for public download.",pdfPreview:A,onSelectItemChange:function(e,n){var t=n.from,r=n.label;if(k(Se),["signal","crop"].includes(t)&&D((0,Q.nS)()),""!==d.error&&p((function(e){return ye({},e,{error:""})})),Object.keys(n).includes("id"))switch(t){case"signal":var o,i,a;p(ye({},_e,{sel_signal:n,sel_typhoon:(null===n||void 0===n?void 0:n.code)===F.hi.SIGNAL_0?"(General - No Signal)":null!==(a=null===B||void 0===B||null===(o=B.data)||void 0===o||null===(i=o.meta)||void 0===i?void 0:i.typhoon_name)&&void 0!==a?a:"-"}));break;case"crop":p((function(e){return ye({},e,{sel_crop:r})}));break;case"province":p((function(e){return ye({},e,{sel_province:r,sel_municipality:null})}));break;case"municipality":p((function(e){return ye({},e,{sel_municipality:r})}))}else"signal"===t?p(_e):"crop"===t?p((function(e){return ye({},e,{sel_crop:null})})):"province"===t?p((function(e){return ye({},e,{sel_province:null,sel_municipality:null})})):"municipality"===t&&p((function(e){return ye({},e,{sel_municipality:null})}))},handlePreview:Re,handleSave:Ae,toggleViewerOpen:function(){E((function(e){return!e}))},resetSelections:function(){p(_e),D((0,Q.nS)())},togglePrompt:function(){L((function(e){return ye({},fe.BF,{isOpen:!e.isOpen})}))}})})}))},87682:function(e,n,t){"use strict";t.d(n,{ky:function(){return v},Kx:function(){return b},m$:function(){return g},tl:function(){return m}});var r=t(34051),o=t.n(r),i=t(67294),a=t(36100),l=t(89328);function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function c(e,n,t,r,o,i,a){try{var l=e[i](a),u=l.value}catch(c){return void t(c)}l.done?n(u):Promise.resolve(u).then(r,o)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){c(i,r,o,a,l,"next",e)}function l(e){c(i,r,o,a,l,"throw",e)}a(void 0)}))}}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){d(e,n,t[n])}))}return e}function f(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return u(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,n){var t=(0,i.useState)(null),r=t[0],u=t[1],c=(0,i.useState)(!0),d=c[0],p=c[1],f=(0,i.useState)(""),v=f[0],b=f[1],g=(0,i.useRef)(!0);return(0,i.useEffect)((function(){var t=function(){var t=s(o().mark((function t(){var r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=(0,a.JU)(l.db,e,n),t.next=4,(0,a.QT)(r);case 4:i=t.sent,g.current&&(i.exists()&&u(i.data()),p(!1)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),b(t.t0.message),p(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){return g.current=!1}}),[e,n]),[r,d,v]}function b(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=(0,i.useState)([]),c=u[0],d=u[1],v=(0,i.useState)(!0),b=v[0],g=v[1],m=(0,i.useState)(""),h=m[0],y=m[1],x=(0,i.useRef)(!0);return(0,i.useEffect)((function(){var i=function(){var i=s(o().mark((function i(){var u,c,s,v;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=[(0,a.Xo)(n,"asc")],r>0&&u.push((0,a.b9)(r)),c=(0,a.hJ)(l.db,e),s=t||a.IO.apply(void 0,[c].concat(f(u))),o.next=7,(0,a.PL)(s);case 7:v=o.sent,x.current&&(d(v.docs.map((function(e){return p({},e.data())}))),g(!1)),o.next=15;break;case 11:o.prev=11,o.t0=o.catch(0),y(o.t0.message),g(!1);case 15:case"end":return o.stop()}}),i,null,[[0,11]])})));return function(){return i.apply(this,arguments)}}();return i(),function(){return x.current=!1}}),[e,n,t,r]),{documents:c,loading:b,error:h}}function g(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=(0,i.useState)([]),c=u[0],d=u[1],f=(0,i.useState)(!0),v=f[0],b=f[1],g=(0,i.useState)(""),m=g[0],h=g[1],y=(0,i.useRef)(!0);return(0,i.useEffect)((function(){var i=function(){var i=s(o().mark((function i(){var u,c;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=(0,a.IO)((0,a.hJ)(l.db,e,n,t),(0,a.Xo)(r)),o.next=4,(0,a.PL)(u);case 4:c=o.sent,y.current&&(d(c.docs.map((function(e){return p({},e.data())}))),b(!1)),o.next=12;break;case 8:o.prev=8,o.t0=o.catch(0),h(o.t0.message),b(!1);case 12:case"end":return o.stop()}}),i,null,[[0,8]])})));return function(){return i.apply(this,arguments)}}();return i(),function(){return y.current=!1}}),[e,n,t,r]),{documents:c,loading:v,error:m}}function m(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=arguments.length>4?arguments[4]:void 0,c=(0,i.useState)([]),d=c[0],f=c[1],v=(0,i.useState)(!0),b=v[0],g=v[1],m=(0,i.useState)(""),h=m[0],y=m[1],x=(0,i.useRef)(!0);return(0,i.useEffect)((function(){var i=function(){var i=s(o().mark((function i(){var c,s;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,c=(0,a.hJ)(l.db,e,n,t),""!==r&&(c=(0,a.IO)(c,(0,a.Xo)(r))),u&&(c=(0,a.IO)(c,(0,a.b9)(u))),o.next=6,(0,a.PL)(c);case 6:s=o.sent,x.current&&(f(s.docs.map((function(e){return p({},e.data())}))),g(!1)),o.next=14;break;case 10:o.prev=10,o.t0=o.catch(0),y(o.t0.message),g(!1);case 14:case"end":return o.stop()}}),i,null,[[0,10]])})));return function(){return i.apply(this,arguments)}}();return i(),function(){return x.current=!1}}),[e,n,t,r,u]),{documents:d,loading:b,error:h}}},1029:function(e,n,t){"use strict";t.d(n,{K:function(){return y},d:function(){return x}});var r=t(34051),o=t.n(r),i=t(94763),a=t(89328),l=t(47426),u=t(27392);function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,n,t,r,o,i,a){try{var l=e[i](a),u=l.value}catch(c){return void t(c)}l.done?n(u):Promise.resolve(u).then(r,o)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){s(i,r,o,a,l,"next",e)}function l(e){s(i,r,o,a,l,"throw",e)}a(void 0)}))}}function p(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(e,n){return!n||"object"!==m(n)&&"function"!==typeof n?c(e):n}function g(e,n){return g=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},g(e,n)}var m=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=v(e);if(n){var o=v(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return b(this,t)}}var y={MEDIA_ASSETS:"n_page_media",ASSETS:"n_page_assets",PAGE_SEARCH:"n_page_search",GLOBAL_COLLECTIONS:"w_services",TYPHOON_ADVISORY:"typhoon_advisory",CYCLONE_ADVISORY:"cyclone_advisory"},x=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&g(e,n)}(t,e);var n=h(t);function t(){var e;p(this,t);var r=c(e=n.apply(this,arguments));f(c(e),"getPageAssetsDoc",function(){var e=d(o().mark((function e(n,t){var i,a,l=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>2&&void 0!==l[2]&&l[2],a=[],e.prev=2,e.next=5,r.getDocumentData(y.ASSETS,n);case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return",[]);case 8:if(t){e.next=10;break}return e.abrupt("return",a);case 10:if(!i){e.next=14;break}return e.abrupt("return",a.data.filter((function(e){return e.page===t})));case 14:return e.abrupt("return",a.data.filter((function(e){return e.page===t})).map((function(e){return e.url})));case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(2),console.error(e.t0.message),new Error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(n,t){return e.apply(this,arguments)}}());var i=c(e);f(c(e),"getTyphoonAdvisory",d(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.doc(i.db,y.GLOBAL_COLLECTIONS,y.TYPHOON_ADVISORY),e.next=3,i.getDoc(n);case 3:if(!(t=e.sent).exists()){e.next=6;break}return e.abrupt("return",t.data());case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)}))));var s=c(e);return f(c(e),"getWeatherForecast",function(){var e=d(o().mark((function e(n,t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getNestedCollectionData(y.WEATHER_FORECASTS,n,t,"name");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),f(c(e),"getPdfDownloadURL",function(){var e=d(o().mark((function e(n){var t,r,i,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.length>1&&void 0!==c[1]?c[1]:u.Ry.SEASONAL,r="",e.t0=t,e.next=e.t0===u.Ry.SEASONAL?5:e.t0===u.Ry.TEN_DAY?7:e.t0===u.Ry.SPECIAL_WEATHER?9:11;break;case 5:return r=l.Do.PDF_STORAGE_SEASONAL,e.abrupt("break",12);case 7:return r=l.Do.PDF_STORAGE_TENDAY,e.abrupt("break",12);case 9:return r=l.Do.PDF_STORAGE_SPECIAL,e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:return e.prev=12,i=(0,a.iH)(a.tO,"".concat(r,"/").concat(n)),e.next=16,(0,a.Jt)(i);case 16:return e.abrupt("return",e.sent);case 19:throw e.prev=19,e.t1=e.catch(12),new Error(e.t1.message);case 22:case"end":return e.stop()}}),e,null,[[12,19]])})));return function(n){return e.apply(this,arguments)}}()),e}return t}(i.Z)}},function(e){e.O(0,[5124,7739,8858,1903,6279,3203,6038,6295,6572,7841,1050,2044,1839,9774,2888,179],(function(){return n=13063,e(e.s=n);var n}));var n=e.O();_N_E=n}]);