(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6134],{65141:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/news",function(){return n(19372)}])},19372:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(85893),i=n(67294),o=n(2734),s=n(98396),a=n(87357),c=n(15861),u=n(11057),l=n(50657),d=n(37645),x=n(93946),p=n(6514),f=n(31425),h=n(50594),m=n(98993);function v(){var e=(0,i.useState)([]),t=e[0],n=e[1],v=(0,i.useState)(!1),b=v[0],w=v[1],y=(0,i.useState)(null),g=y[0],j=y[1],k=(0,o.Z)(),Z=(0,s.Z)(k.breakpoints.down("sm"));(0,i.useEffect)((function(){(0,m.lh)().then(n)}),[]);var S=/(https?:\/\/[^\s]+)/g,O=function(e){if(!e)return null;for(var t,n=[],i=0;null!==(t=S.exec(e));){var o=t.index,s=t[0];o>i&&n.push({type:"text",text:e.slice(i,o)}),n.push({type:"url",text:s}),i=o+s.length}return i<e.length&&n.push({type:"text",text:e.slice(i)}),n.map((function(e,t){return"url"===e.type?(0,r.jsx)("a",{href:e.text,target:"_blank",rel:"noopener noreferrer",style:{color:"#1976d2",textDecoration:"underline"},children:e.text},t):(0,r.jsx)("span",{children:e.text},t)}))},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600;if(!e)return"";var n=e.replace(/\s+/g," ").trim();return n.length>t?n.slice(0,t).trim()+"...":n},C=function(e){if(!e)return[];var t,n,r,i=null!==(r=null!==(n=null!==(t=e.imageUrl)&&void 0!==t?t:e.images)&&void 0!==n?n:e.imagesList)&&void 0!==r?r:"";if(!i)return[];if(Array.isArray(i))return i.filter(Boolean);if("string"===typeof i){try{var o=JSON.parse(i);if(Array.isArray(o))return o.filter(Boolean)}catch(s){}return i.split(",").map((function(e){return e.trim()})).filter(Boolean)}return[]},D=function(e){j(e),w(!0)},P=function(){w(!1),j(null)};return(0,r.jsxs)(a.Z,{sx:{maxWidth:1100,mx:"auto",mt:4,px:{xs:2,sm:3}},children:[(0,r.jsx)(c.Z,{variant:"h4",gutterBottom:!0,children:"News"}),0===t.length&&(0,r.jsx)(c.Z,{children:"No news yet."}),t.map((function(e,t){var n=C(e),i=n.length>0?n[0]:null;return(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,alignItems:"flex-start",mb:3,p:2,borderRadius:2,bgcolor:"background.paper",boxShadow:1,cursor:"pointer"},onClick:function(){return D(e)},children:[i&&(0,r.jsx)(a.Z,{component:"img",src:i,alt:"thumb",sx:{width:{xs:"100%",sm:420},height:{xs:200,sm:260},objectFit:"cover",borderRadius:1,border:"1px solid #eee",flexShrink:0}}),(0,r.jsxs)(a.Z,{sx:{flex:1,minWidth:0},children:[(0,r.jsx)(c.Z,{variant:"h6",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:{xs:"normal",sm:"nowrap"}},children:e.title}),(0,r.jsx)(c.Z,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:e.created?new Date(e.created).toLocaleString():""}),(0,r.jsx)(c.Z,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:{xs:5,sm:6},WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",mb:1},children:O(_(e.content))}),(0,r.jsx)(u.Z,{size:"small",onClick:function(t){t.stopPropagation(),D(e)},children:"See more"})]})]},e.id||t)})),(0,r.jsxs)(l.Z,{open:b,onClose:P,fullWidth:!0,maxWidth:"md",fullScreen:Z,children:[(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",py:{xs:1,sm:2}},children:[(0,r.jsx)("span",{style:{wordBreak:"break-word"},children:null===g||void 0===g?void 0:g.title}),(0,r.jsx)(x.Z,{onClick:P,size:"small",children:(0,r.jsx)(h.Z,{})})]}),(0,r.jsxs)(p.Z,{dividers:!0,sx:{p:{xs:2,sm:3}},children:[g&&C(g).length>0&&(0,r.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column",gap:2,mb:2},children:C(g).map((function(e,t){return(0,r.jsx)(a.Z,{component:"img",src:e,alt:"news-".concat(t),sx:{width:"100%",maxHeight:{xs:360,sm:520},objectFit:"cover",borderRadius:1}},t)}))}),(0,r.jsx)(c.Z,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:(null===g||void 0===g?void 0:g.created)?new Date(g.created).toLocaleString():""}),(0,r.jsx)(c.Z,{component:"div",sx:{whiteSpace:"pre-line"},children:O(null===g||void 0===g?void 0:g.content)})]}),(0,r.jsx)(f.Z,{sx:{p:{xs:1,sm:2}},children:(0,r.jsx)(u.Z,{onClick:P,children:"Close"})})]})]})}},98993:function(e,t,n){"use strict";n.d(t,{yQ:function(){return f},lh:function(){return m},jB:function(){return b},kN:function(){return y}});var r=n(34051),i=n.n(r),o=n(89328),s=n(36100),a=n(86650);function c(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){c(o,r,i,s,a,"next",e)}function a(e){c(o,r,i,s,a,"throw",e)}s(void 0)}))}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}var x="news",p=(0,a.cF)();function f(e,t){return h.apply(this,arguments)}function h(){return(h=u(i().mark((function e(t,n){var r,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",!n){e.next=8;break}return c=(0,a.iH)(p,"news/".concat(Date.now(),"_").concat(n.name)),e.next=5,(0,a.KV)(c,n);case 5:return e.next=7,(0,a.Jt)(c);case 7:r=e.sent;case 8:return e.next=10,(0,s.ET)((0,s.hJ)(o.db,x),d({},t,{imageUrl:r,created:(new Date).toISOString()}));case 10:return u=e.sent,e.abrupt("return",u.id);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return v.apply(this,arguments)}function v(){return(v=u(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.IO)((0,s.hJ)(o.db,x),(0,s.Xo)("created","desc")),e.next=3,(0,s.PL)(t);case 3:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return d({id:e.id},e.data())})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t,n,r){return w.apply(this,arguments)}function w(){return(w=u(i().mark((function e(t,n,r,c){var u,l,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=c||"",!r){e.next=17;break}if(!c){e.next=11;break}return e.prev=3,l=(0,a.iH)(p,c),e.next=7,(0,a.oq)(l);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:return f=(0,a.iH)(p,"news/".concat(Date.now(),"_").concat(r.name)),e.next=14,(0,a.KV)(f,r);case 14:return e.next=16,(0,a.Jt)(f);case 16:u=e.sent;case 17:return e.next=19,(0,s.r7)((0,s.JU)(o.db,x,t),d({},n,{imageUrl:u,updated:(new Date).toISOString()}));case 19:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function y(e,t){return g.apply(this,arguments)}function g(){return(g=u(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=9;break}return e.prev=1,r=(0,a.iH)(p,n),e.next=5,(0,a.oq)(r);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.next=11,(0,s.oe)((0,s.JU)(o.db,x,t));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}}},function(e){e.O(0,[5124,7739,3203,9364,9774,2888,179],(function(){return t=65141,e(e.s=t);var t}));var t=e.O();_N_E=t}]);